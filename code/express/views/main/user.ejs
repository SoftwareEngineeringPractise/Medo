<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("../include")%>
    <title>Medo</title>
    <script src="/public/js/user.js"></script>
</head>

<body background="/public/imgs/material-grey-light-4k.jpg">
    <div class="wrap">
        <div class="main">
            <%- include("nav")%>
            <main role="main" class="App-main">
                <div id="ProfileHeader" class="ProfileHeader">
                    <div class="Card">
                        <div class="ProfileHeader-userCover">
                            <div class="UserCoverEditor">
                                <div>
                                    <label class="UploadPicture-wrapper">
                                        <input type="file" name="file" id="xFile" url="/api/web/file/upload/bg"
                                            bind-img="UserCover-image" onchange="upload(this);" accept="image/png,image/jpeg"
                                            class="hide UploadPicture-input">
                                        <button type="button" onclick="javaScript:$('#xFile').click();" class="Button UserCoverEditor-simpleEditButton DynamicColorButton DynamicColorButton--dark">
                                            <svg viewBox="0 0 20 16" class="Icon Icon--camera Icon--left" style="height: 16px; width: 14px;"
                                                width="14" height="16" aria-hidden="true">
                                                <title></title>
                                                <g>
                                                    <path d="M18.094 2H15s-1-2-2-2H7C6 0 5 2 5 2H2C0 2 0 3.967 0 3.967V14c0 2 2.036 2 2.036 2H17c3 0 3-1.983 3-1.983V4c0-2-1.906-2-1.906-2zM10 12c-1.933 0-3.5-1.567-3.5-3.5S8.067 5 10 5s3.5 1.567 3.5 3.5S11.933 12 10 12zm0 1.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm7.5-8c-.552 0-1-.448-1-1s.448-1 1-1 1 .448 1 1-.448 1-1 1z"
                                                        fill-rule="evenodd"></path>
                                                </g>
                                            </svg>编辑封面图片
                                        </button>
                                    </label>
                                    <div class="UserCover"><img id="UserCover-image" class="UserCover-image" src="<%= docs.bgUrl%>"
                                            alt="用户封面"></div>
                                </div>
                            </div>
                        </div>
                        <div class="ProfileHeader-wrapper">
                            <div class="ProfileHeader-main">
                                <div>
                                    <div class="UserAvatarEditor ProfileHeader-avatar" style="top: -57px;">
                                        <div class="UserAvatar"><img onclick="javaScript:$('#yFile').click();" id="Avatar-image"
                                                class="Avatar Avatar--large UserAvatar-inner" src="<%= docs.avatarUrl%>"
                                                width="160" height="160"></div><label class="UploadPicture-wrapper">
                                            <input type="file" name="file" id="yFile" url="/api/web/file/upload/avatar"
                                                accept="image/png,image/jpeg" bind-img="Avatar-image" onchange="upload(this);"
                                                class="hide UploadPicture-input">
                                            <div class="Mask UserAvatarEditor-mask Mask-hidden">
                                                <div class="Mask-mask Mask-mask--black UserAvatarEditor-maskInner"></div>
                                                <div class="Mask-content"><svg class="Zi Zi--Camera UserAvatarEditor-cameraIcon"
                                                        fill="currentColor" viewBox="0 0 24 24" width="36" height="36">
                                                        <path d="M20.094 6S22 6 22 8v10.017S22 20 19 20H4.036S2 20 2 18V7.967S2 6 4 6h3s1-2 2-2h6c1 0 2 2 2 2h3.094zM12 16a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7zm0 1.5a5 5 0 1 0-.001-10.001A5 5 0 0 0 12 17.5zm7.5-8a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"
                                                            fill-rule="evenodd"></path>
                                                    </svg>
                                                    <div class="UserAvatarEditor-maskInnerText">修改我的头像</div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <div class="ProfileHeader-content">
                                    <div class="ProfileHeader-contentHead">
                                        <h1 class="ProfileHeader-title"><span class="ProfileHeader-name">
                                                <%= docs.username%>
                                            </span><span class="RichText ztext ProfileHeader-headline">
                                                <%= docs.motto%></span></h1>
                                    </div>
                                    <div style="overflow: hidden; transition: height 300ms ease-out 0s; height: 20px;"
                                        class="ProfileHeader-contentBody">
                                        <div>
                                            <div class="ProfileHeader-info">
                                                <div class="ProfileHeader-infoItem">
                                                    <div class="ProfileHeader-iconWrapper"><svg width="14" height="16"
                                                            viewBox="0 0 14 14" class="Icon Icon--male" style="height: 16px; width: 14px;"
                                                            aria-hidden="true">
                                                            <title></title>
                                                            <g>
                                                                <%if (docs.userInfo.gender == "male") { %>
                                                                <path d="M3.025 10.64c-1.367-1.366-1.367-3.582 0-4.95 1.367-1.366 3.583-1.366 4.95 0 1.367 1.368 1.367 3.584 0 4.95-1.367 1.368-3.583 1.368-4.95 0zm10.122-9.368c-.002-.414-.34-.75-.753-.753L8.322 0c-.413-.002-.746.33-.744.744.002.413.338.75.75.752l2.128.313c-.95.953-1.832 1.828-1.832 1.828-2.14-1.482-5.104-1.27-7.013.64-2.147 2.147-2.147 5.63 0 7.777 2.15 2.148 5.63 2.148 7.78 0 1.908-1.91 2.12-4.873.636-7.016l1.842-1.82.303 2.116c.003.414.34.75.753.753.413.002.746-.332.744-.745l-.52-4.073z"
                                                                    fill-rule="evenodd"></path>
                                                                <% } else { %>
                                                                <path d="M6 0C2.962 0 .5 2.462.5 5.5c0 2.69 1.932 4.93 4.485 5.407-.003.702.01 1.087.01 1.087H3C1.667 12 1.667 14 3
                                                                    14s1.996-.006 1.996-.006v1c0 1.346 2.004 1.346 1.998 0-.006-1.346 0-1 0-1S7.658 14 8.997 14c1.34 0
                                                                    1.34-2-.006-2.006H6.996s-.003-.548-.003-1.083C9.555 10.446 11.5 8.2 11.5 5.5 11.5 2.462 9.038 0 6 0zM2.25 5.55C2.25
                                                                    3.48 3.93 1.8 6 1.8c2.07 0 3.75 1.68 3.75 3.75C9.75 7.62 8.07 9.3 6 9.3c-2.07 0-3.75-1.68-3.75-3.75z"
                                                                    fill-rule="evenodd"></path>
                                                                <% } %>

                                                            </g>
                                                        </svg></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ProfileHeader-contentFooter"><button type="button" class="Button ProfileHeader-expandButton Button--plain"><svg
                                                viewBox="0 0 10 6" class="Icon ProfileHeader-arrowIcon Icon--arrow"
                                                style="height: 16px; width: 10px;" width="10" height="16" aria-hidden="true">
                                                <title></title>
                                                <g>
                                                    <path d="M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z"></path>
                                                </g>
                                            </svg>查看详细资料</button>
                                        <div class="MemberButtonGroup ProfileButtonGroup ProfileHeader-buttons">
                                            <button type="button" userid="<%= docs._id %>" onclick="addToFollow(this)"
                                                id="Follow" class="hide Button FollowButton Button--primary Button--blue"><span
                                                    style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Plus FollowButton-icon"
                                                        fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em">
                                                        <path d="M13.491 10.488s-.012-5.387 0-5.998c-.037-1.987-3.035-1.987-2.997 0-.038 1.912 0 5.998 0 5.998H4.499c-1.999.01-1.999 3.009 0 3.009s5.995-.01 5.995-.01v5.999c0 2.019 3.006 2.019 2.997 0-.01-2.019 0-5.998 0-5.998s3.996.009 6.004.009c2.008 0 2.008-3-.01-3.009h-5.994z"
                                                            fill-rule="evenodd"></path>
                                                    </svg></span>加入关注</button>


                                            <button type="button" id="UnFollow" userid="<%= docs._id %>" onclick="delFromFollow(this)"
                                                class="hide Button FollowButton Button--primary Button--grey">已关注</button>
                                            
                                                    <%if (docs.verified ) { %>
                                                        <button type="button" class="Button Button--blue">
                                                        <%= docs.userInfo.role %></button>
                                                        
                                                    <% } else { %>
                                                    <button type="button" id="Verification" onclick="window.location.href='/verification'" class="Button Button--grey Button--withIcon Button--withLabel"> 未认证</button>
                                                    <% } %>
                                               

                                            <button type="button" id="EditProfile" class="hide Button Button--blue">编辑个人资料</button></div>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="Profile-main">
                    <div class="Profile-mainColumn">
                        <div class="Card ProfileMain" id="ProfileMain">
                            <div class="ProfileMain-header">
                                <ul role="tablist" class="Tabs ProfileMain-tabs">
                                    <li role="tab" class="Tabs-item Tabs-item--noMeta" aria-controls="Profile-activities"><a
                                            class="Tabs-link is-active" userid="<%= docs._id %>" url="/updatings"
                                            onclick="handledata(this)">动态</a></li>
                                    <li role="tab" class="Tabs-item" aria-controls="Profile-answers"><a class="Tabs-link"
                                            userid="<%= docs._id %>" url="/follows" onclick="handledata(this)">关注<span
                                                class="Tabs-meta"></span></a></li>
                                    <li role="tab" class="Tabs-item" aria-controls="Profile-asks"><a class="Tabs-link"
                                            userid="<%= docs._id %>" url="/favorites" onclick="handledata(this)">收藏<span
                                                class="Tabs-meta"></span></a></li>
                                    <li role="tab" class="Tabs-item" aria-controls="Profile-posts"><a class="Tabs-link"
                                            userid="<%= docs._id %>" url="/contents" onclick="handledata(this)">文章<span
                                                class="Tabs-meta"></span></a></li>
                                    <li role="tab" class="Tabs-item" aria-controls="Profile-columns"><a class="Tabs-link"
                                            userid="<%= docs._id %>" url="/messages" onclick="handledata(this)">消息<span
                                                class="Tabs-meta"></span></a></li>
                                    <li role="tab" class="Tabs-item" aria-controls="Profile-pins"><a meta="0" class="Tabs-link"
                                            userid="<%= docs._id %>" url="/test" onclick="handledata(this)">测试<span
                                                class="Tabs-meta"></span></a></li>

                                </ul>
                            </div>
                            <div>
                                <div>
                                    <div class="Sticky" style=""></div>
                                </div>
                            </div>
                            <div class="List" id="Profile-posts">
                                <div class="List-header">
                                    <h4 class="List-headerText"><span id="Active-title">动态</span></h4>
                                    <div class="List-headerOptions"></div>
                                </div>
                                <div id="List-content">
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <%- include("footer")%>
</body>
<script>
    var code = <%= code %>;
    console.log(code);
    if (code) {
        if (code == 1) {
            $("#EditProfile").removeClass("hide");
        } else if (code == 2) {
            $("#Follow").removeClass("hide");
            
        } else {
            $("#UnFollow").removeClass("hide");
        }
    }
</script>

</html>